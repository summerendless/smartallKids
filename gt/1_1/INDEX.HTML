<html>

<head>
    <title>스마트올 키즈</title>

    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <!-- 검색 엔진에 의해 검색되는 단어를 지정합니다. -->
    <meta name="KeyWORDs" content="" />
    <!-- 검색 결과에 표시되는 문자를 지정합니다. -->
    <meta name="Description" content="" />
    <!-- 검색 로봇 제어 -->
    <meta name="Robots" content="all" />
    <!-- 홈페이지 주제를 지정 -->
    <meta http-equiv="Subject" content="" />
    <!-- 제목을 지정 -->
    <meta http-equiv="Title" content="" />
    <!-- 페이지를 작성한 제작자명을 지정 -->
    <meta http-equiv="Author" content="onflou " />
    <!-- 제작사를 지정 -->
    <meta http-equiv="Publisher" content="" />

    <!-- 브라우저 호환성을 지정 -->
    <meta http-equiv="X-UA-Compatible" content="ie=edge,chorme=1">
    <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1">

    <link rel="stylesheet" href="../../../COMM/CSS/COMMON.CSS" />
    <link rel="stylesheet" href="../../../COMM/CSS/JQUERY_UI.CSS" />
    <link rel="stylesheet" href="../../../COMM/CSS/STYLE.CSS" />
</head>

<body>
    <div id="wrap" class="">
        <header>
            <div class="indicate">
                <ul class="paging">
                    <li class="page off"><img src="../../COMM/IMG/ICON_CANDY_OFF.PNG"/></li>
                    <li class="page off"><img src="../../COMM/IMG/ICON_CANDY_OFF.PNG"/></li>
                    <li class="page off"><img src="../../COMM/IMG/ICON_CANDY_OFF.PNG"/></li>
                    <li class="page off"><img src="../../COMM/IMG/ICON_CANDY_OFF.PNG"/></li>
                </ul>
            </div>
        </header>

        <div class="wrapper ">
            <div class="zoomInner">
                <section class="section section1">
                    <div class="pageContents">
                        <div class="item-img"><img src="../../COMM/IMG/WORD/1_1/ITEM_1_1.png"/></div>
                        <div id="canvasContainer" style="    position: fixed;bottom: 140px;">                           
                            <canvas id="canvas" class="canvas" width="1280" height="226" style="border:solid 3px #CCC;"></canvas>
                        </div>
                    </div>
                    <div class="controls">
                        <!--붓의 크기-->
                        <div class="controls__range">
                            <input type="range" id="jsRange" min="0.1" max="5.0" step="0.1" />
                        </div>
                        <!--채우기, 저장 버튼-->
                        <!-- <div class="controls__btns">
                            <button id="jsMode">Fill</button>
                            <button id="jsSave">Save</button>
                        </div> -->
                        <!--색상 버튼-->
                        <div class="color-palette">
                            <div class="controls__colors color-items" id="jsColors">
                                <div class="controls__color color-option color-red jsColor" ><img src="../../COMM/IMG/CRAYON_BV.PNG" data-color="#ff0000" alt="랜덤" /></div>
                                <div class="controls__color color-option color-red jsColor" ><img src="../../COMM/IMG/CRAYON_RD.PNG" data-color="#ff0000" alt="빨강" /></div>
                                <div class="controls__color color-option color-orange jsColor" ><img src="../../COMM/IMG/CRAYON_OR.png" data-color="#ff8c00" alt="주황" /></div>
                                <div class="controls__color color-option color-yellow jsColor" ><img src="../../COMM/IMG/CRAYON_YL.png" data-color="#ffff00" alt="노랑" /></div>
                                <div class="controls__color color-option color-green jsColor" ><img src="../../COMM/IMG/CRAYON_GN.png" data-color="#008000" alt="초록" /></div>
                                <div class="controls__color color-option color-blue jsColor" ><img src="../../COMM/IMG/CRAYON_BL.PNG" data-color="#0000ff" alt="파랑" /></div>
                                <div class="controls__color color-option color-purple jsColor" ><img src="../../COMM/IMG/CRAYON_PR.png" data-color="#800080" alt="보라" /></div>
                                <div class="controls__color color-option color-purple jsColor"></div><img src="../../COMM/IMG/ICON_BIN_EN.png" alt="쓰레기통 활성화"/></div>
                            </div>
                        </div>
                    </div>
                    <button class="next-btn"> <img src="../../../COMM/IMG/BTN_NEXT_UN.PNG" alt=""> </button>
                    <!-- <button class="done-btn active"> <img src="../../../COMM/IMG/BTN_DONE.PNG" alt=""> </button> -->
                </section>
                <!-- //section1 -->
                
                <section class="section section2" style="display: none;">
                    <div class="pageContents">
                        <div class="stick-panel">
                            <div class="answer answer11" data-answer=00><img src="../../COMM/IMG/WORD/1_1/STICKER_OFF_1_1.png"/></div>
                            <div class="answer answer12" data-answer=01><img src="../../COMM/IMG/WORD/1_1/STICKER_OFF_1_2.png"/></div>
                            <div class="answer answer13" data-answer=02><img src="../../COMM/IMG/WORD/1_1/STICKER_OFF_1_3.png"/></div>
                            <div class="answer answer14" data-answer=03><img src="../../COMM/IMG/WORD/1_1/STICKER_OFF_1_4.png"/></div>
                            <div class="item-img"><img src="../../../COMM/IMG/WORD/1_1/ITEM_1_1.PNG" alt=""></div>
                            <div class="item-word"><img src="../../../COMM/IMG/WORD/1_1/WORD_1_1_3.PNG" alt=""></div>   
                        </div>
                        <div class="answer-list">
                            <div class="answer-item" data-answer=00><img src="../../../COMM/IMG/WORD/1_1/STICKER_ON_1_1.PNG" alt="" /></div>
                            <div class="answer-item" data-answer=01><img src="../../../COMM/IMG/WORD/1_1/STICKER_ON_1_2.PNG" alt="" /></div>
                            <div class="answer-item" data-answer=02><img src="../../../COMM/IMG/WORD/1_1/STICKER_ON_1_3.PNG" alt="" /></div>
                            <div class="answer-item" data-answer=03><img src="../../../COMM/IMG/WORD/1_1/STICKER_ON_1_4.PNG" alt="" /></div>

                        </div>
                    </div>
                </section>
                <!-- //section2 -->

                <section class="section section3" style="display: none;">
                    <div class="pageContents">
                        <div class="stick-panel">
                            <div class="answer answer11" data-answer=00><img src="../../COMM/IMG/WORD/1_1/STICKER_ON_1_1.png"/></div>
                            <div class="answer answer12" data-answer=01><img src="../../COMM/IMG/WORD/1_1/STICKER_ON_1_2.png"/></div>
                            <div class="answer answer13" data-answer=02><img src="../../COMM/IMG/WORD/1_1/STICKER_ON_1_3.png"/></div>
                            <div class="answer answer14" data-answer=03><img src="../../COMM/IMG/WORD/1_1/STICKER_ON_1_4.png"/></div>
                            <div class="item-img"><img src="../../../COMM/IMG/WORD/1_1/ITEM_1_1.PNG" alt=""></div>
                            <div class="item-word"><img src="../../../COMM/IMG/WORD/1_1/WORD_1_1_3.PNG" alt=""></div>   
                        </div>
                        <div class="stick-panel">
                            <div class="answer answer11" data-answer=00><img src="../../COMM/IMG/WORD/1_1/STICKER_ON_1_1.png"/></div>
                            <div class="answer answer12" data-answer=01><img src="../../COMM/IMG/WORD/1_1/STICKER_ON_1_2.png"/></div>
                            <div class="answer answer13" data-answer=02><img src="../../COMM/IMG/WORD/1_1/STICKER_ON_1_3.png"/></div>
                            <div class="answer answer14" data-answer=03><img src="../../COMM/IMG/WORD/1_1/STICKER_ON_1_4.png"/></div>
                            <div class="item-img"><img src="../../../COMM/IMG/WORD/1_1/ITEM_1_1.PNG" alt=""></div>
                            <div class="item-word"><img src="../../../COMM/IMG/WORD/1_1/WORD_1_1_3.PNG" alt=""></div>   
                        </div>
                        <div class="stick-panel">
                            <div class="answer answer11" data-answer=00><img src="../../COMM/IMG/WORD/1_1/STICKER_ON_1_1.png"/></div>
                            <div class="answer answer12" data-answer=01><img src="../../COMM/IMG/WORD/1_1/STICKER_ON_1_2.png"/></div>
                            <div class="answer answer13" data-answer=02><img src="../../COMM/IMG/WORD/1_1/STICKER_ON_1_3.png"/></div>
                            <div class="answer answer14" data-answer=03><img src="../../COMM/IMG/WORD/1_1/STICKER_ON_1_4.png"/></div>
                            <div class="item-img"><img src="../../../COMM/IMG/WORD/1_1/ITEM_1_1.PNG" alt=""></div>
                            <div class="item-word"><img src="../../../COMM/IMG/WORD/1_1/WORD_1_1_3.PNG" alt=""></div>   
                        </div>
                        <div class="stick-panel">
                            <div class="answer answer11" data-answer=00><img src="../../COMM/IMG/WORD/1_1/STICKER_ON_1_1.png"/></div>
                            <div class="answer answer12" data-answer=01><img src="../../COMM/IMG/WORD/1_1/STICKER_ON_1_2.png"/></div>
                            <div class="answer answer13" data-answer=02><img src="../../COMM/IMG/WORD/1_1/STICKER_ON_1_3.png"/></div>
                            <div class="answer answer14" data-answer=03><img src="../../COMM/IMG/WORD/1_1/STICKER_ON_1_4.png"/></div>
                            <div class="item-img"><img src="../../../COMM/IMG/WORD/1_1/ITEM_1_1.PNG" alt=""></div>
                            <div class="item-word"><img src="../../../COMM/IMG/WORD/1_1/WORD_1_1_3.PNG" alt=""></div>   
                        </div>
                    </div>
                    <button class="done-btn">
                         <!--  active  --> 
                        <img src="../../../COMM/IMG/BTN_DONE.PNG" alt=""> 
                    </button>

                </section>
                <!-- //section3 -->
            </div>
        </div>
    </div>
    <!-- wrap -->

<SCRIPT SRC="../../../COMM/JS/JQUERY-3.5.1.MIN.JS"></SCRIPT>
<!-- <SCRIPT SRC="../../../COMM/JS/JQUERY_UI.MIN.JS"></SCRIPT> -->
<!-- <SCRIPT SRC="../../../COMM/JS/COMMON.JS"></SCRIPT> -->
<!-- <SCRIPT SRC="../../../COMM/JS/TOUCH.JS"></SCRIPT> -->
<!-- <SCRIPT SRC="../../../COMM/JS/FABRIC_S.JS"></SCRIPT> -->
<!-- <script src="../../../COMM/JS/guidelines.js"></script> -->
<script src="../../../COMM/JS/DATA.JSON"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script>

<style>
    .answer11 {
        width: 10.4%;
        height: 24.5%;
        left: 12%;
        top: 15%;
    }
    .answer12 {
        width: 16%;
        height: 21%;
        left: 8%;
        bottom: 23%;
    }

    .answer13 {
        width: 12.6%;
        height: 17%;
        right: 11%;
        top: 14%;
    }
    .answer14 {
        right: 13%;
        bottom: 20%;
        width: 9.4%;
    height: 17%;
    }
    /* .answer11::before {
        background: url('../../COMM/IMG/WORD/1_1/STICKER_BLINK_1_1.png') no-repeat;

        content: "";
        background-size: cover;
        width: 100%;
        position: absolute;
        height: 100%;
        left: 0;
        top: 0;
    } */
</style>
<script>
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // 시작 세팅

    const word = "1_1";
    let mydata = JSON.parse(JSON.stringify(data));
    let wordData = mydata[word];
    let wordUrl = wordData.url;

    console.log(wordUrl)
    let _fabricConfig = {
        // ....
        crossOrigin:'anonymous'
    };
    
    let canvas = this.__canvas = new fabric.Canvas('canvas',_fabricConfig);  
</script>
<script>

    // 캔버스 개발 
    fabric.Object.prototype.objectCaching = false;
    fabric.Object.prototype.targetFindTolerance = 2;
    fabric.Canvas.prototype.orderObjects = function(compare) {
       this._objects.sort(compare);
       this.renderAll();
    }
    
    var objleft = 20;
    var objtop = 200;
    var objFontSize = 100;
    
    var state = [];
    var mods = 0;
    
    var background, backgroundBG;
    var overlay; 
    var w = $('#canvasContainer').width();
    var h = $('#canvasContainer').height();
    let ratio;
    let dataN;
    
    // var center = {x:w / 2, y:h / 2);
        let center =canvas.getCenter();
        var clipingRect = new fabric.Rect({
            originX: 'center',
            originY: 'center',
            width:600,
            // rx: 100,
            // ry: 100,
            fill:"rgba(255,255,255,0)",
            //strokeDashArray: [5, 5],
            stroke: 0, 
            strokeWidth: 1, 
        });
        
        var mainIMG = new fabric.Image.fromURL(wordUrl, function (objects, options) {
            background = objects;
            let objW = objects.width + 36;
            let objH = objects.height + 36;
            ratio = objects.width / objects.height  ;
            background.set({
                originX: 'center',
                originY: 'center',
                selectable: false,
                preserveObjectStacking:false,
                centeredScaling: false ,
                defaultCursor:'default',
                moveCursor: 'default',
            });
            canvas.add(background);
            canvas.centerObject(background);
            canvas.renderAll();
   
            // clipingRect.set('width', objW).set('height', objH);
            // canvas.centerObject(clipingRect);
    
            var canvasWidth = $(window).width();
            var canvasHeight = $(window).height();
            // canvas.zoomToPoint(new fabric.Point(canvas.width / 2, canvas.height / 2), zoomLevel);    
        }, { crossOrigin: 'anonymous' });
    
        
    
        // console.log( (canvas.width / 2) - (clipingRect.width/2 ) +330)
        let bg =  canvas.setBackgroundImage(clipingRect , canvas.renderAll.bind(canvas), {
            originX: 'center',
            originY: 'center',
            left: center.left,
            top: center.top
        });

    // undo = function undo() {
    //     if (mods+1 < state.length) {
    //         // console.log(mods)
    //         // console.log(state)
    //         canvas.clear().renderAll();
    //         canvas.loadFromJSON(state[state.length - 1 - mods - 1]);
    //         canvas.renderAll();
    //         //console.log("geladen " + (state.length-1-mods-1));
    //         //console.log("state " + state.length);
    //         mods += 1;
    //         //console.log("mods " + mods);
    //     }
    // }

function text(){
    var textbox = new fabric.IText('TEXT', {
        left: objleft,
        top: objtop,
        fontSize: objFontSize,
        fontFamily: 'Noto Sans KR',
        fill: 'black',
        lineHeight:'1',
        underline:false,
        linethrough: false,
        editable: false,
        originX: 'center',
        originY: 'center',
        globalCompositeOperation: 'source-atop'
    });
    canvas.add(textbox).centerObject(textbox).setActiveObject(textbox);

    // canvas.bringForward(textbox);
    // canvas.sendToBack( background2);
    //     canvas.sendToBack( background);
    updateModifications(true);
}

    /////////////////////////////////////////////////   
    // window.addEventListener('resize', resizeCanvas, false);
    //     function resizeCanvas() {
    //         var w = $('#canvasContainer').width();
    //         var h = $('#canvasContainer').height();
    //         canvas.setDimensions({
    //             width: w,
    //             height: h
    //         });
    //             // TEST 떄문에 숨김
    //             var topimg = canvas.setOverlayImage(wordUrl, function() {
    //             //canvas.overlayImage && canvas.overlayImage.scaleToWidth(200);
    //             canvas.centerObject(canvas.overlayImage);
    //             canvas.renderAll()
    //         }, {
    //             // Needed to position overlayImage at 0/0
    //             originX: 'center',
    //             originY: 'center',
    //             crossOrigin: 'anonymous'
    //         });
    
    //         if(background != undefined ){
    //             canvas.centerObject(background);
    //         }
      
    //       // obj.setCoords();
    
    //          canvas.centerObject(clipingRect);
    //         //  console.log(background.width)    
    //     }
    // resizeCanvas(); 2023-06-12
</script>
</body>

</html>