<html>

<head>
    <title>스마트올 키즈</title>

    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <!-- 검색 엔진에 의해 검색되는 단어를 지정합니다. -->
    <meta name="KeyWORDs" content="" />
    <!-- 검색 결과에 표시되는 문자를 지정합니다. -->
    <meta name="Description" content="" />
    <!-- 검색 로봇 제어 -->
    <meta name="Robots" content="all" />
    <!-- 홈페이지 주제를 지정 -->
    <meta http-equiv="Subject" content="" />
    <!-- 제목을 지정 -->
    <meta http-equiv="Title" content="" />
    <!-- 페이지를 작성한 제작자명을 지정 -->
    <meta http-equiv="Author" content="onflou " />
    <!-- 제작사를 지정 -->
    <meta http-equiv="Publisher" content="" />

    <!-- 브라우저 호환성을 지정 -->
    <meta http-equiv="X-UA-Compatible" content="ie=edge,chorme=1">
    <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1">

    <link rel="stylesheet" href="../../../COMM/CSS/COMMON.CSS" />
    <link rel="stylesheet" href="../../../COMM/CSS/JQUERY_UI.CSS" />
    <link rel="stylesheet" href="../../../COMM/CSS/STYLE.CSS" />
</head>

<body>
    <div id="wrap" class="">
        <header>
            <div class="indicate">
                <ul class="paging">
                    <li class="page off"><img src="../../COMM/IMG/ICON_CANDY_OFF.PNG"/></li>
                    <li class="page off"><img src="../../COMM/IMG/ICON_CANDY_OFF.PNG"/></li>
                    <li class="page off"><img src="../../COMM/IMG/ICON_CANDY_OFF.PNG"/></li>
                    <li class="page off"><img src="../../COMM/IMG/ICON_CANDY_OFF.PNG"/></li>
                </ul>
            </div>
        </header>

        <div class="wrapper ">
            <div class="zoomInner">
                <section class="section section1">
                    <div class="pageContents">
                        <div id="canvasContainer">                           
                            <canvas id="canvas" class="canvas" width="600" height="600" style="border:solid 3px #CCC;"></canvas>
                            <!-- <canvas id="Jscanvas" class="Jscanvas" width="600" height="600" style="border:solid 3px #CCC;"></canvas> -->
                        </div>
                    </div>
                    <div class="controls">
                        <!--붓의 크기-->
                        <div class="controls__range">
                            <input type="range" id="jsRange" min="0.1" max="5.0" step="0.1" />
                        </div>
                        <!--채우기, 저장 버튼-->
                        <!-- <div class="controls__btns">
                            <button id="jsMode">Fill</button>
                            <button id="jsSave">Save</button>
                        </div> -->
                        <!--색상 버튼-->
                        <div class="color-palette">
                            <div class="controls__colors color-items" id="jsColors">
                                <div class="controls__color color-option color-red jsColor" ><img src="../../COMM/IMG/CRAYON_BV.PNG" data-color="#ff0000" alt="랜덤" /></div>
                                <div class="controls__color color-option color-red jsColor" ><img src="../../COMM/IMG/CRAYON_RD.PNG" data-color="#ff0000" alt="빨강" /></div>
                                <div class="controls__color color-option color-orange jsColor" ><img src="../../COMM/IMG/CRAYON_OR.png" data-color="#ff8c00" alt="주황" /></div>
                                <div class="controls__color color-option color-yellow jsColor" ><img src="../../COMM/IMG/CRAYON_YL.png" data-color="#ffff00" alt="노랑" /></div>
                                <div class="controls__color color-option color-green jsColor" ><img src="../../COMM/IMG/CRAYON_GN.png" data-color="#008000" alt="초록" /></div>
                                <div class="controls__color color-option color-blue jsColor" ><img src="../../COMM/IMG/CRAYON_BL.PNG" data-color="#0000ff" alt="파랑" /></div>
                                <div class="controls__color color-option color-purple jsColor" ><img src="../../COMM/IMG/CRAYON_PR.png" data-color="#800080" alt="보라" /></div>
                            </div>
                        </div>
                    </div>
                    
                    <button class="next-btn"> <img src="../../../COMM/IMG/BTN_NEXT_UN.PNG" alt=""> </button>
                    <!-- <button class="done-btn active"> <img src="../../../COMM/IMG/BTN_DONE.PNG" alt=""> </button> -->
                </section>
                <!-- //section1 -->
                
                <section class="section section2">
                    <div class="pageContents">
                        <div class="answer answer11" data-answer=00></div>
                        <div class="answer answer12" data-answer=01></div>
                        <div class="answer answer13" data-answer=02></div>
                        <div class="answer answer14" data-answer=03></div>
                        <img src="../../../COMM/IMG/WORD/1_1/ITEM_1_1.PNG" alt="">
                    </div>
                </section>
                <!-- //section2 -->
            </div>
        </div>
        <!-- <div id="wordWrap"></div> -->
    </div>
    <!-- wrap -->

<SCRIPT SRC="../../../COMM/JS/JQUERY-3.5.1.MIN.JS"></SCRIPT>
<!-- <SCRIPT SRC="../../../COMM/JS/JQUERY_UI.MIN.JS"></SCRIPT> -->
<!-- <SCRIPT SRC="../../../COMM/JS/COMMON.JS"></SCRIPT> -->
<!-- <SCRIPT SRC="../../../COMM/JS/TOUCH.JS"></SCRIPT> -->
<SCRIPT SRC="../../../COMM/JS/FABRIC_S.JS"></SCRIPT>
<script src="../../../COMM/JS/guidelines.js"></script>
<script src="../../../COMM/JS/DATA.JSON"></script>
<script>
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // **개발시 참고
    // 시작 세팅
    // phoneData 값 호출로 json parsing
    const word = "1_1";
    let mydata = JSON.parse(JSON.stringify(data));
    let wordData = mydata[word];
    let wordUrl = wordData.url;

    console.log(wordUrl)
    let _fabricConfig = {
        // ....
        crossOrigin:'anonymous'
    };
    
    const canvas = this.__canvas = new fabric.Canvas(
        // 'canvas',
        // _fabricConfig
        'canvas', 
        _fabricConfig
    );
  </script>
  <!-- <SCRIPT SRC="../../../COMM/JS/CONTROLS.JS"></SCRIPT> -->
  <script>

    // 캔버스 개발 
    fabric.Object.prototype.objectCaching = false;
    // fabric.Object.prototype.targetFindTolerance = 2;
    // fabric.Canvas.prototype.orderObjects = function(compare) {
    //    this._objects.sort(compare);
    //    this.renderAll();
    // }
    
    // var objleft = 20;
    // var objtop = 200;
    // var objFontSize = 100;
    
    // var state = [];
    // var mods = 0;
    
    //phone 
    var background, backgroundBG;
    var overlay; 
    var w = $('#canvasContainer').width();
    var h = $('#canvasContainer').height();
    let ratio;
    let dataN;
    
    // var center = {x:w / 2, y:h / 2);
        let center =canvas.getCenter();
        // var clipingRect = new fabric.Rect({
        //     originX: 'center',
        //     originY: 'center',
        //     width:600,
        //     // rx: 100,
        //     // ry: 100,
        //     fill:"rgba(255,255,255,0)",
        //     //strokeDashArray: [5, 5],
        //     stroke: 0, 
        //     strokeWidth: 1, 
        // });
        
        var mainIMG = new fabric.Image.fromURL(wordUrl, function (objects, options) {
            background = objects;
            let objW = objects.width + 36;
            let objH = objects.height + 36;
            ratio = objects.width / objects.height  ;
            background.set({
                originX: 'center',
                originY: 'center',
                selectable: false,
                preserveObjectStacking:false,
                centeredScaling: false ,
                defaultCursor:'default',
                moveCursor: 'default',
            });
            canvas.add(background);
            canvas.centerObject(background);
            canvas.renderAll();
   
            // clipingRect.set('width', objW).set('height', objH);
            // canvas.centerObject(clipingRect);
    
            var canvasWidth = $(window).width();
            var canvasHeight = $(window).height();
            // canvas.zoomToPoint(new fabric.Point(canvas.width / 2, canvas.height / 2), zoomLevel);    
        }, { crossOrigin: 'anonymous' });

        // console.log( (canvas.width / 2) - (clipingRect.width/2 ) +330)
        // let bg =  canvas.setBackgroundImage(clipingRect , canvas.renderAll.bind(canvas), {
        //     originX: 'center',
        //     originY: 'center',
        //     left: center.left,
        //     top: center.top
        // });

    // undo = function undo() {
    //     if (mods+1 < state.length) {
    //         // console.log(mods)
    //         // console.log(state)
    //         canvas.clear().renderAll();
    //         canvas.loadFromJSON(state[state.length - 1 - mods - 1]);
    //         canvas.renderAll();
    //         //console.log("geladen " + (state.length-1-mods-1));
    //         //console.log("state " + state.length);
    //         mods += 1;
    //         //console.log("mods " + mods);
    //     }
    // }
    
    // 새로 추가된 스크립트 /////////////////////////////////////////////////
    // const canvasDraw = document.querySelector("upper-canvas"); // 글자 이미지를 담은 캔버스
    // const ctxDraw = canvasDraw.getContext('2d'); //context는 안에서 픽셀 컨트롤
    // ctxDraw.beginPath();
    // ctxDraw.arc(80,50,100,0, 2 * Math.PI);
    // ctxDraw.stroke();
    // ctxDraw.clip();
    // const INITIAL_COLOR = '#2c2c2c';
    // const CANVAS_SIZE = 400;

    // //canvas에게 높이와, 너비를 지정해준다
    // canvasDraw.width = CANVAS_SIZE;
    // canvasDraw.height = CANVAS_SIZE;

    // ctxDraw.strokeStyle = INITIAL_COLOR; //context안에 있는 선의 색
    // ctxDraw.fillStyle = INITIAL_COLOR;
    // ctxDraw.lineWidth = 5; //context안에 있는 선의 너비
    // let painting = false; //그리기 기본값을 false로 한다

    // function stopPainting() {
    //     painting = false; //그리기를 멈춘다
    // }

    // function startPainting() {
    //     painting = true;
    // }

    // function onMouseMove(event) {
    //     const x = event.offsetX; //offset은 캔버스만 관계된 좌표
    //     const y = event.offsetY;
    //     if (!painting) {
    //         //그림 그리지 않을때
    //         canvasDraw.beginPath(); //path(선)의 시작
    //         canvasDraw.moveTo(x, y); //(보이진 않지만) 이동할때 좌표생성
    //     } else {
    //         canvasDraw.lineTo(x, y); //lineTo의 좌표에 path가 그려진다(보이진 않지만)
    //         canvasDraw.stroke(); //stroke는 path를 선으로 그린다
    //     } //lineTo와 stroke는 마우스를 움직일때마다 생긴다
    // }

    // function handleColorClick(event) {
    //     // const color = event.target.style.backgroundColor;
    //     $(this).addClass('active');
    //     $(this).siblings().removeClass('active');
    //     const color = event.target.dataset.color;
    //     canvasDraw.strokeStyle = color; //선의 색을 클릭한 색으로 바꾼다
    //     canvasDraw.fillStyle = canvasDraw.strokeStyle; //채우기 색과  선의 색이 같게 한다
    // }

    // if (canvasDraw) {
    //     canvasDraw.addEventListener('mousemove', onMouseMove); //마우스 움직일때
    //     canvasDraw.addEventListener('mousedown', startPainting); //클릭했을때
    //     canvasDraw.addEventListener('mouseup', stopPainting); //마우스 뗐을때
    //     canvasDraw.addEventListener('mouseleave', stopPainting); //캔버스를 벗어났을때
    //     // canvas.addEventListener('click', handleCanvasClick); //클릭했을때 캔버스
    //     // canvas.addEventListener('contextmenu', handleCM); //클릭했을때 저장
    // }

    // Array.from(colors).forEach((color) =>
    //     color.addEventListener('click', handleColorClick),
    // );

    // var canvasDraw = new fabric.Canvas(document.getElementById('Jscanvas'))
    // canvas.isDrawingMode = true;
    // canvas.freeDrawingBrush.width = 5;
    // canvas.freeDrawingBrush.color = '#00aeff';

    // canvas.on('path:created', function(e) {
    
    // e.path.set();
    // canvas.renderAll();
    // console.log(canvas.toDataURL("image/png").replace("img/png", "image/octet-string"));

    // });

//    function iden() {
//     var $ = function(id){return document.getElementById(id)};

//     var canvasDraw = this.__canvas = new fabric.Canvas('upper-canvas', {
//         isDrawingMode: true
//     });

//     fabric.Object.prototype.transparentCorners = false;

// //   var drawingModeEl = $('drawing-mode'),
// //       drawingOptionsEl = $('drawing-mode-options'),
// //       drawingColorEl = $('drawing-color'),
// //       drawingLineWidthEl = $('drawing-line-width'),
// //       clearEl = $('clear-canvas');


//     canvasDraw.freeDrawingBrush.width = 15;
//     canvasDraw.freeDrawingBrush.color = 'red';

// //   if (canvasDraw.freeDrawingBrush) {
// //     canvasDraw.freeDrawingBrush.color = drawingColorEl.value;
// //     canvasDraw.freeDrawingBrush.source = canvasDraw.freeDrawingBrush.getPatternSrc.call(this);
// //   }
// }iden();



    /////////////////////////////////////////////////


   // 이미지 그려지는 부분으로 변경 할 것
    // function text(){

    //     var textbox = new fabric.Canvas('canvas', {
    //         // left: objleft,
    //         // top: objtop,
    //         // fontSize: objFontSize,
    //         // fontFamily: 'Noto Sans KR',
    //         // fill: 'black',
    //         // lineHeight:'1',
    //         // underline:false,
    //         // linethrough: false,
    //         // editable: false,
    //         // originX: 'center',
    //         // originY: 'center',
    //         globalCompositeOperation: 'source-atop'
    //     });
    //     // Canvas.isDrawingMode = true;
    //     // canvas.add(textbox).centerObject(textbox).setActiveObject(textbox);
    
    //     // fonts.unshift('Noto Sans KR');
    // }
    // text()
    
    // window.addEventListener('resize', resizeCanvas, false);
    //     function resizeCanvas() {
    //         var w = $('#canvasContainer').width();
    //         var h = $('#canvasContainer').height();
    //         canvas.setDimensions({
    //             width: w,
    //             height: h
    //         });
    //             // TEST 떄문에 숨김
    //             var topimg = canvas.setOverlayImage(wordUrl, function() {
    //             //canvas.overlayImage && canvas.overlayImage.scaleToWidth(200);
    //             canvas.centerObject(canvas.overlayImage);
    //             canvas.renderAll()
    //         }, {
    //             // Needed to position overlayImage at 0/0
    //             originX: 'center',
    //             originY: 'center',
    //             crossOrigin: 'anonymous'
    //         });
    
    //         if(background != undefined ){
    //             canvas.centerObject(background);
    //         }
      
    //       // obj.setCoords();
    
    //          canvas.centerObject(clipingRect);
    //         //  console.log(background.width)    
    //     }
    // resizeCanvas(); 2023-06-12

    </script>
<SCRIPT type="text/javascript">
    // var type = "science"; // type 써주세요
    var words = [
        ["철","알루미늄","날 부분"],
    ]; //단어들 정답 순서대로 작성
        
</SCRIPT>
</body>

</html>